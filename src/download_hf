#!/bin/bash

# HuggingFace Download Script
# Downloads models from HuggingFace URLs

set +e  # Don't exit on errors

# Function to download from HuggingFace
download_huggingface() {
    local download_url="$1"
    local target_dir="${2:-.}"
    
    # Extract filename from URL
    local filename=$(basename "$download_url")
    
    echo "ü§ó Downloading HuggingFace model: $filename"
    echo "üìÅ Target directory: $target_dir"
    echo "üì• URL: $download_url"
    
    # Create target directory if it doesn't exist
    mkdir -p "$target_dir"
    
    # Use aria2 for direct URL download (faster and more reliable)
    aria2c -x 16 -s 16 -k 1M -d "$target_dir" -o "$filename" \
        --max-tries=3 --retry-wait=5 \
        --user-agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36" \
        "$download_url"
    
    if [ $? -eq 0 ]; then
        echo "‚úÖ HuggingFace download completed for $download_url"
    else
        echo "‚ùå HuggingFace download failed for $download_url"
        return 1
    fi
}

# Call the function with all arguments
download_huggingface "$@"
