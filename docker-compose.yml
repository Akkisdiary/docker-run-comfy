services:
  comfyui:
    build:
      context: .
      dockerfile: Dockerfile.cpu
    
    container_name: comfyui
    hostname: comfyui
    
    environment:
      - CIVITAI_TOKEN=${CIVITAI_TOKEN:-}
      - HF_TOKEN=${HF_TOKEN:-}
      - DOWNLOAD_WAN22=false
      - DOWNLOAD_FLUX_FP8=false
      - DOWNLOAD_FLUX_KONTEXT=false
    
    ports:
      - "8188:8188"                 # ComfyUI web interface
      - "8888:8888"                 # Jupyter notebook server
    
    # Simulate RunPod network volume by mounting entire /workspace
    volumes:
      # - ./src:/src
      - ./workspace:/workspace